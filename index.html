<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PracticeTrack</title>
    
    <!-- Primary Meta Tags -->
    <meta name="description" content="PracticeTrack - Track your music practice sessions, set goals, analyze stats, and manage media.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mikenz88.github.io/">
    <meta property="og:title" content="PracticeTrack - Music Practice Tracker">
    <meta property="og:description" content="Track your music practice sessions, set goals, analyze stats, and manage media. Free, no account needed.">
    <meta property="og:image" content="https://mikenz88.github.io/icon-512x512.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://mikenz88.github.io/">
    <meta property="twitter:title" content="PracticeTrack - Music Practice Tracker">
    <meta property="twitter:description" content="Track your music practice sessions, set goals, analyze stats, and manage media. Free, no account needed.">
    <meta property="twitter:image" content="https://mikenz88.github.io/icon-512x512.png">

    <link rel="stylesheet" href="css/styles.css">

    <!-- Favicons, Manifest, and PWA meta tags -->
    <!-- <link rel="icon" href="favicon.ico"> REMOVED -->
    <!-- <link rel="icon" type="image/svg+xml" href="favicon.svg"> Temporarily commented out for testing -->
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192x192.png"> <!-- PNG fallback/alternative -->
    <link rel="apple-touch-icon" href="apple-touch-icon.png"> <!-- Base icon for iOS (180x180) -->
    <!-- <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon-180x180.png"> REMOVED - Redundant if base icon is 180x180 -->
    <link rel="manifest" href="manifest.json"> <!-- Web App Manifest (Keep) -->
    <meta name="msapplication-TileColor" content="#4154b3"> <!-- Windows Tile Color (Keep) -->
    <!-- <meta name="msapplication-TileImage" content="mstile-144x144.png"> REMOVED -->
    <meta name="theme-color" content="#4154b3"> <!-- Theme Color for Browser UI (Keep) -->
    <meta name="format-detection" content="telephone=no"> <!-- Prevent iOS phone number detection (Keep) -->
    <meta name="apple-mobile-web-app-capable" content="yes"> <!-- iOS web app mode (Keep) -->
    <meta name="apple-mobile-web-app-status-bar-style" content="default"> <!-- iOS status bar style (Keep) -->
    <meta name="apple-mobile-web-app-title" content="PracticeTrack"> <!-- iOS app title (Keep) -->
    <!-- End Favicons and PWA meta tags -->

    <!-- Include Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <!-- Application Scripts -->
    <script src="js/data.js" defer></script>
    <script src="js/ui-framework.js" defer></script>
    <script src="js/resource-database.js" defer></script>
    <script src="js/resource-finder.js" defer></script>
    <script src="js/resources-list.js" defer></script>
    <script src="js/app.js" defer></script>
    <script src="js/timer.js" defer></script>
    <script src="js/settings.js" defer></script>
    <script src="js/stats.js" defer></script>
    <script src="js/sessions.js" defer></script>
    <script src="js/goals.js" defer></script>
    <script src="js/db.js" defer></script>
    <script src="js/media.js" defer></script>
    <script src="js/user-guide.js" defer></script>
    <script src="js/categories.js" defer></script>
    <script src="js/metronome.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>

    <!-- Add CSS for button press effect -->
    <style>
        .button-pressed {
            transform: scale(0.95);
            opacity: 0.8;
            transition: all 0.1s ease-in-out;
        }
        
        /* Specific color change for each button when pressed */
        #resources-how-to-use-btn.button-pressed {
            background-color: #3730a3 !important; /* Darker blue */
        }
        
        #how-to-practice-btn.button-pressed {
            background-color: #3730a3 !important; /* Darker blue */
        }
        
        #explore-resources-btn.button-pressed {
            background-color: #c2410c !important; /* Darker orange */
        }
        
        /* App button press effect */
        .app-button.button-pressed {
            transform: scale(0.95);
            opacity: 0.8;
        }
        
        /* App button color changes when pressed */
        .app-button--primary.button-pressed {
            background-color: rgba(79, 70, 229, 0.8) !important;
        }
        
        .app-button--secondary.button-pressed {
            background-color: rgba(55, 65, 81, 0.8) !important;
        }
        
        /* Guide section buttons press effect */
        .guide-filter-buttons button.button-pressed {
            transform: scale(0.95);
            opacity: 0.8;
        }
        
        /* Resource filter buttons press effect */
        .resource-instrument-filter-btn.button-pressed {
            transform: scale(0.95);
            opacity: 0.8;
            background-color: rgba(79, 70, 229, 0.8) !important;
        }
        
        /* Modal close buttons press effect */
        .userGuideModal .close-button.button-pressed,
        .howToPracticeModal .close-button.button-pressed,
        .resourcesModal .close-button.button-pressed {
            transform: rotate(90deg);
            transition: transform 0.2s ease;
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <span class="logo-practice">Practice</span><span class="logo-track">Track</span>
            </div>
            <div class="tagline">Your musical journey companion</div>
            <div class="header-actions">
                <button class="header-button update-button" id="header-update-button" title="Check for Updates">
                    <i data-lucide="refresh-cw"></i>
                </button>
                <button class="header-button settings-button" id="header-settings-button" title="Settings">
                    <i data-lucide="settings"></i>
                </button>
            </div>
        </header>

        <!-- Main Navigation -->
        <nav class="main-nav">
            <div class="nav-items">
                <a href="#timer" class="nav-item active" data-page="timer">
                    <i data-lucide="timer"></i>
                    <span>Timer</span>
                </a>
                <a href="#sessions" class="nav-item" data-page="sessions">
                    <i data-lucide="clock"></i>
                    <span>Sessions</span>
                </a>
                <a href="#goals" class="nav-item" data-page="goals">
                    <i data-lucide="target"></i>
                    <span>Goals</span>
                </a>
                <a href="#stats" class="nav-item" data-page="stats">
                    <i data-lucide="bar-chart"></i>
                    <span>Stats</span>
                </a>
                <a href="#media" class="nav-item" data-page="media">
                    <i data-lucide="image"></i>
                    <span>Media</span>
                </a>
                <a href="#resources" class="nav-item" data-page="resources">
                    <i data-lucide="help-circle"></i>
                    <span>Resources</span>
                </a>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Timer Page -->
            <section id="timer-page" class="page active">
                <!-- Wrapper to constrain header and content width -->
                <div class="timer-page-wrapper">
                    <!-- Add the new 'How To Use' button container here -->
                    <div class="timer-page-actions">
                        <button id="timer-how-to-use-button" class="app-button app-button--secondary app-button--small">
                            <i data-lucide="help-circle"></i>
                            <span>How To Use PracticeTrack</span>
                        </button>
                    </div>
                    <!-- Gradient Header -->
                    <div class="page-gradient-header">
                        <h1>Practice Timer</h1>
                        <p>Track your practice time and keep notes on your progress</p>
                    </div>

                    <!-- Main Timer Content Area -->
                    <div class="timer-content-area">
                        <!-- Main Timer Card -->
                        <div class="timer-card">
                            <!-- Category and Goal Selection Wrapper -->
                            <div class="form-group timer-selectors-wrapper">
                                <div class="timer-selector-item">
                                    <!-- <label for="practice-category">Category (Optional)</label> -->
                                    <select id="practice-category" class="form-control" title="Select Category (Optional)">
                                        <option value="">Select Category</option>
                                        <!-- Options loaded dynamically -->
                                    </select>
                                </div>
                                <div class="timer-selector-item">
                                    <!-- <label for="timer-goal-select">Goal (Optional)</label> -->
                                    <select id="timer-goal-select" class="form-control" title="Select Goal (Optional)">
                                        <option value="">Select Goal</option>
                                        <!-- Options loaded dynamically -->
                                    </select>
                                </div>
                            </div>

                            <!-- Timer Display with SVG Circles -->
                            <div class="timer-display-container">
                                <svg class="timer-svg" viewBox="0 0 120 120">
                                    <circle cx="60" cy="60" r="50" class="timer-circle-bg outer-circle" />
                                    <circle cx="60" cy="60" r="50" class="timer-circle-progress outer-progress" transform="rotate(-90 60 60)" />
                                    <circle cx="60" cy="60" r="35" class="timer-circle-bg inner-circle" />
                                    <circle cx="60" cy="60" r="35" class="timer-circle-progress inner-progress" transform="rotate(-90 60 60)" />
                                </svg>
                                <div class="timer-time">
                                    <div class="timer-digits">00:00:00</div>
                                    <div class="timer-status">Ready</div>
                                </div>
                            </div>

                            <!-- Timer Controls -->
                            <div class="timer-controls">
                                <!-- Start/Pause/Resume Button -->
                                <button id="start-timer" class="timer-btn primary-action">
                                    <!-- Icon and text updated by JS -->
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <polygon points="5 3 19 12 5 21 5 3"></polygon>
                                    </svg>
                                    <span>Start</span>
                                </button>
                                <!-- Reset Button (conditional) -->
                                <button id="reset-timer" class="timer-btn secondary-action hidden">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M3 2v6h6"></path>
                                        <path d="M21 12A9 9 0 0 0 6 5.3L3 8"></path>
                                        <path d="M21 22v-6h-6"></path>
                                        <path d="M3 12a9 9 0 0 0 15 6.7l3-2.7"></path>
                                    </svg>
                                    <span>Reset</span>
                                </button>
                            </div>

                            <!-- Save Button (conditional) -->
                            <div class="save-button-container">
                                <button id="save-timer" class="timer-btn save-action hidden">
                                     <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                                        <polyline points="17 21 17 13 7 13 7 21"></polyline>
                                        <polyline points="7 3 7 8 15 8"></polyline>
                                    </svg>
                                    <span>Save Session</span>
                                </button>
                            </div>

                            <!-- Session Notes -->
                            <div class="session-form">
                                <!-- Label removed -->
                                <textarea id="session-notes" class="form-control" rows="4" placeholder="Add notes about your practice session..."></textarea>
                            </div>
                        </div>

                        <!-- Metronome Section -->
                        <div class="metronome-card">
                             <div class="metronome-content">
                                <!-- Add Metronome Heading Here -->
                                <h2>Metronome</h2>
                                <!-- BPM Control -->
                                <div class="bpm-control">
                                    <div class="bpm-display"><span id="bpm-value">120</span> BPM</div>
                                    <input type="range" id="bpm-slider" min="30" max="300" value="120" class="bpm-slider">
                                    <div class="bpm-range-labels">
                                        <span>30</span>
                                        <span>300</span>
                                    </div>
                                    <div class="bpm-buttons">
                                        <button id="decrease-bpm" class="bpm-btn">
                                            <i data-lucide="minus"></i>
                                        </button>
                                        <button id="increase-bpm" class="bpm-btn">
                                             <i data-lucide="plus"></i>
                                        </button>
                                    </div>
                                </div>

                                <!-- Start/Stop Button -->
                                <button id="metronome-toggle" class="metronome-start-btn">
                                    <!-- Text updated by JS -->
                                    <span>Start</span>
                                </button>

                                <!-- Beat Visualization -->
                                <div class="beat-visualization">
                                    <!-- Beat indicators added by JS -->
                                </div>

                                <!-- Time Signatures & Sound Options -->
                                <div class="metronome-settings">
                                    <div class="time-signature-section">
                                        <h3>Common Time Signatures</h3>
                                        <div class="time-signature-buttons">
                                            <button class="time-signature-btn active" data-signature="4/4">4/4</button>
                                            <button class="time-signature-btn" data-signature="3/4">3/4</button>
                                            <button class="time-signature-btn" data-signature="6/8">6/8</button>
                                        </div>
                                    </div>
                                    <div class="time-signature-section">
                                        <h3>Complex Time Signatures</h3>
                                        <div class="time-signature-buttons">
                                            <button class="time-signature-btn" data-signature="5/4">5/4</button>
                                            <button class="time-signature-btn" data-signature="7/4">7/4</button>
                                            <button class="time-signature-btn" data-signature="7/8">7/8</button>
                                            <button class="time-signature-btn" data-signature="9/8">9/8</button>
                                        </div>
                                    </div>
                                    <div class="sound-section">
                                        <h3>Sound Options</h3>
                                        <div class="sound-buttons">
                                            <button class="sound-btn active" data-sound="click">Click</button>
                                            <button class="sound-btn" data-sound="wood">Wood</button>
                                            <button class="sound-btn" data-sound="digital">Digital</button>
                                            <button class="sound-btn" data-sound="soft">Soft</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Sessions Page -->
            <section id="sessions-page" class="page">
                <!-- Wrapper to constrain header and content width -->
                <div class="page-wrapper">
                    <!-- Gradient Header -->
                    <div class="page-gradient-header">
                        <h1>Practice Sessions</h1>
                        <p>Review, edit, and manage your practice history.</p>
                    </div>
                    <div class="page-content-container">
                        <div class="filters">
                            <input type="text" class="search-input" placeholder="Search sessions...">
                            <select class="category-filter">
                                <option value="">All Categories</option>
                            </select>
                            <!-- Date Preset Dropdown -->
                            <select class="date-preset-filter filter-select" title="Select Date Range Preset">
                                <option value="today">Today</option>
                                <option value="all">All Time</option>
                                <option value="week">This Week</option>
                                <option value="month">This Month</option>
                                <option value="year">This Year</option>
                                <option value="ytd">Year to Date</option>
                                <option value="custom">Custom Range</option>
                            </select>
                            <div class="date-range">
                                <label for="session-start-date">Start:</label>
                                <input type="date" id="session-start-date" class="date-input" placeholder="Start Date">
                                <label for="session-end-date">End:</label>
                                <input type="date" id="session-end-date" class="date-input" placeholder="End Date">
                            </div>
                        </div>
                        <div class="page-actions centered">
                            <button id="add-session-btn" class="app-button app-button--primary">
                                <i data-lucide="plus"></i>
                                <span>Add Session</span>
                            </button>
                        </div>
                        <div id="sessions-list" class="sessions-list">
                            <!-- Sessions will be added here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Goals Page -->
            <section id="goals-page" class="page">
                <!-- Wrapper to constrain header and content width -->
                <div class="page-wrapper">
                    <!-- Gradient Header -->
                    <div class="page-gradient-header">
                        <h1>Practice Goals</h1>
                        <p>Set, track, and achieve your musical objectives.</p>
                    </div>
                    <div class="page-content-container">
                    <div class="filters">
                        <input type="text" class="goals-search-input" placeholder="Search goals...">
                        <select class="goals-category-filter">
                            <option value="">All Categories</option>
                        </select>
                        <select class="goals-status-filter">
                            <option value="all">All Goals</option>
                            <option value="active" selected>Active Goals</option>
                            <option value="completed">Completed Goals</option>
                        </select>
                        <!-- Date Preset Dropdown -->
                        <select class="date-preset-filter filter-select" title="Select Date Range Preset">
                            <option value="all">All Time</option>
                            <option value="week">This Week</option>
                            <option value="month">This Month</option>
                            <option value="year">This Year</option>
                            <option value="ytd">Year to Date</option>
                            <option value="custom">Custom Range</option>
                        </select>
                    </div>
                        <div class="page-actions centered">
                        <button id="add-goal-btn" class="app-button app-button--primary">
                            <i data-lucide="plus"></i>
                            <span>Add Goal</span>
                        </button>
                        <button id="smart-goal-btn" class="app-button app-button--secondary">
                            <i data-lucide="lightbulb"></i>
                            <span>Smart Goal</span>
                        </button>
                    </div>
                    <div id="goals-list" class="goals-list">
                        <!-- Goals will be populated here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Stats Page -->
            <section id="stats-page" class="page">
                <!-- Wrapper to constrain header and content width -->
                <div class="page-wrapper">
                    <!-- Gradient Header -->
                    <div class="page-gradient-header">
                        <h1>Practice Stats</h1>
                        <p>Visualize your practice trends and progress over time.</p>
                    </div>
                    <div class="page-content-container" id="stats-content">
                    <div class="filters">
                            <select id="category-filter" class="stats-category-filter filter-select">
                            <option value="">All Categories</option>
                        </select>
                            <!-- Date Preset Dropdown -->
                            <select class="date-preset-filter filter-select" title="Select Date Range Preset">
                                <option value="all">All Time</option>
                                <option value="week">This Week</option>
                                <option value="month">This Month</option>
                                <option value="year">This Year</option>
                                <option value="ytd">Year to Date</option>
                                <option value="custom">Custom Range</option>
                            </select>
                        <div class="date-range">
                                <label for="stats-start-date">Start:</label>
                                <input type="date" id="stats-start-date" class="stats-date-input date-input" placeholder="Start Date">
                                <label for="stats-end-date">End:</label>
                                <input type="date" id="stats-end-date" class="stats-date-input date-input" placeholder="End Date">
                            </div>
                        </div>
                        <!-- Lesson Countdown -->
                        <div id="lesson-countdown-container" class="lesson-countdown-container">
                            <!-- Countdown card will be inserted here by JS -->
                        </div>
                        <!-- Main Stats Container -->
                        <div class="stats-container">
                            <!-- Stats grid will be displayed here by JS -->
                        </div>

                        <!-- Container for the Category Time Chart -->
                        <div id="category-time-chart-container" style="height: 400px; margin-top: 30px;">
                            <!-- Canvas will be injected here by JS -->
                        </div>

                        <!-- Container for the Goal Time Chart -->
                        <div id="goal-time-chart-container" style="height: 400px; margin-top: 30px;">
                            <!-- Goal chart canvas will be injected here by JS -->
                        </div>

                        <!-- Container for Practice Scale Guide -->
                        <div id="practice-guide-content" class="practice-guide-section" style="margin-top: var(--space-xl);"> 
                            <!-- Guide Content Loaded by JS -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Media Page -->
            <section id="media-page" class="page">
                <!-- Wrapper to constrain header and content width -->
                <div class="page-wrapper">
                    <!-- Gradient Header -->
                    <div class="page-gradient-header">
                        <h1>Media Library</h1>
                         <p>Create notes and record videos and photos to your device.</p>
                    </div>
                    <div class="page-content-container">
                    <div class="filters">
                        <input type="text" class="search-input" placeholder="Search media...">
                        <select class="media-type-filter">
                            <option value="">All Types</option>
                            <option value="photo">Photos</option>
                            <option value="video">Videos</option>
                            <option value="note">Notes</option>
                        </select>
                            <!-- Date Preset Dropdown -->
                            <select class="date-preset-filter filter-select" title="Select Date Range Preset">
                                <option value="today">Today</option>
                                <option value="all">All Time</option>
                                <option value="week">This Week</option>
                                <option value="month">This Month</option>
                                <option value="year">This Year</option>
                                <option value="ytd">Year to Date</option>
                                <option value="custom">Custom Range</option>
                            </select>
                        <div class="date-range">
                                <label for="media-start-date">Start:</label>
                                <input type="date" id="media-start-date" class="date-input" placeholder="Start Date">
                                <label for="media-end-date">End:</label>
                                <input type="date" id="media-end-date" class="date-input" placeholder="End Date">
                            </div>
                        </div>
                        <div class="media-controls">
                            <button class="app-button app-button--primary" id="add-photo">
                                <i data-lucide="camera"></i>
                                <span>Add Photo</span>
                            </button>
                            <button class="app-button app-button--primary" id="add-video">
                                <i data-lucide="video"></i>
                                <span>Add Video</span>
                            </button>
                            <button class="app-button app-button--primary" id="add-note">
                                <i data-lucide="file-text"></i>
                                <span>Add Note</span>
                            </button>
                            <button class="app-button app-button--secondary" id="upload-media-btn">
                                <i data-lucide="upload"></i>
                                <span>Upload</span>
                            </button>
                        </div>
                        <div class="media-info-text">
                             <p>
                                It can be hard to find things in your device's gallery! Use this section to keep track of lesson recordings, practice snippets, performance videos, or helpful photos. If you record media outside the app, you can upload the file reference here. You can also create lesson or practice notes.
                             </p>
                         </div>
                         <div class="media-container">
                         <div id="media-list" class="media-list">
                             <!-- Media items will be populated here -->
                             </div>
                         </div>
                     </div>
                 </div>
            </section>

            <!-- Resources Page -->
            <section id="resources-page" class="page">
                <!-- Wrapper to constrain header and content width -->
                <div class="page-wrapper">
                    <!-- Gradient Header -->
                    <div class="page-gradient-header">
                        <h1>Resources</h1>
                         <p>Explore helpful learning materials and links.</p>
                    </div>
                     <div class="page-content-container">
                         <!-- How-To Buttons -->
                         <div style="text-align: center; margin: 20px 0; display: flex; flex-wrap: wrap; justify-content: center; gap: var(--space-sm);">
                             <button id="resources-how-to-use-btn" class="app-button app-button--secondary app-button--small">
                                  <i data-lucide="help-circle"></i>
                                  <span>How to use PracticeTrack</span>
                              </button>
                             <button id="how-to-practice-btn" class="app-button app-button--secondary app-button--small">
                                  <i data-lucide="book-open"></i>
                                  <span>How to Practice</span>
                              </button>
                             <button id="explore-resources-btn" class="app-button app-button--primary app-button--small">
                                  <i data-lucide="link"></i>
                                  <span>Learning Resources</span>
                              </button>
                         </div>
                         
                         <!-- Resource Filters -->
                         <div class="resource-filters">
                             <div class="resource-instrument-filters">
                                 <button class="resource-instrument-filter-btn active" data-instrument="Guitar">Guitar</button>
                                 <button class="resource-instrument-filter-btn active" data-instrument="Bass Guitar">Bass</button>
                                 <button class="resource-instrument-filter-btn active" data-instrument="Keyboard">Keyboard</button>
                                 <button class="resource-instrument-filter-btn active" data-instrument="Percussion">Drums</button>
                                 <button class="resource-instrument-filter-btn active" data-instrument="Strings">Strings</button>
                                 <button class="resource-instrument-filter-btn active" data-instrument="Woodwinds">Woodwinds</button>
                                 <button class="resource-instrument-filter-btn active" data-instrument="Brass">Brass</button>
                             </div>
                             <input type="search" id="resource-search" placeholder="Search topics..." class="form-control">
                         </div>
                         
                         <!-- Dynamic Resource Categories -->
                         <div id="dynamic-resource-list" class="dynamic-resource-list">
                             <!-- Categories will be loaded here by JS -->
                         </div>
                         
                         <!-- Container for Static Resource List -->
                         <div id="static-resource-content" class="static-resources-container">
                            <!-- Static HTML content will be injected here by JS -->
                         </div>
                     </div>
                 </div>
            </section>

            <!-- Settings Page -->
            <section id="settings-page" class="page">
                <div class="page-header">
                    <h1>Settings</h1>
                </div>
                <div class="settings-container">
                    <!-- Lesson Settings -->
                    <div class="settings-section">
                        <h2>Lesson Settings</h2>
                        <form id="settings-form" class="settings-form">
                            <div class="form-group">
                                <label for="lesson-day">Lesson Day</label>
                                <div id="lesson-day-selector" class="day-selector-group">
                                    <button type="button" class="day-button" data-day="Monday">Mon</button>
                                    <button type="button" class="day-button" data-day="Tuesday">Tue</button>
                                    <button type="button" class="day-button" data-day="Wednesday">Wed</button>
                                    <button type="button" class="day-button" data-day="Thursday">Thu</button>
                                    <button type="button" class="day-button" data-day="Friday">Fri</button>
                                    <button type="button" class="day-button" data-day="Saturday">Sat</button>
                                    <button type="button" class="day-button" data-day="Sunday">Sun</button>
                                    <button type="button" class="day-button clear-day" data-day="">Clear</button>
                                </div>
                                <input type="hidden" id="lesson-day" name="lesson-day">
                            </div>
                            <div class="form-group">
                                <label for="lesson-time">Lesson Time</label>
                                <input type="time" id="lesson-time" name="lesson-time">
                            </div>
                            <button type="button" id="save-lesson-settings" class="primary-button">Save Settings</button>
                        </form>
                    </div>

                    <!-- Categories Management -->
                    <div class="settings-section">
                        <h2>Practice Categories</h2>
                        <div class="categories-container">
                            <div class="add-category-form">
                                <input type="text" id="new-category-name" placeholder="Enter new category name">
                                <button id="add-category-btn" class="primary-button">Add Category</button>
                            </div>
                            <div class="tip-box">
                                <h4>Tip: Add Specific Pieces</h4>
                                <p>Consider adding individual songs, etudes, or pieces you are currently working on as categories for more detailed tracking!</p>
                            </div>
                            <div id="categories-list" class="categories-list">
                                <!-- Categories will be loaded here -->
                            </div>
                        </div>
                    </div>

                    <!-- Data Management -->
                    <div class="settings-section">
                        <h2>Data Management</h2>
                        <div class="data-buttons">
                            <button id="export-data" class="primary-button">
                                <i data-lucide="download"></i>
                                Export Data
                            </button>
                            <button id="import-data" class="primary-button">
                                <i data-lucide="upload"></i>
                                Import Data
                            </button>
                        </div>
                        <p id="last-import-info" class="setting-info">Last successful import: Loading...</p>
                        <div class="clear-data-section">
                            <h4>Clear All Data</h4>
                            <p>Warning: This action cannot be undone.</p>
                            <button id="clear-all-data" class="danger-button">
                                <i data-lucide="trash-2"></i>
                                Clear All Data
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Session Dialog (Modal) -->
            <dialog id="session-dialog" class="standard-dialog">
                <form id="session-form" class="session-form">
                    <h2 id="dialog-title">Edit Session</h2>
                    <!-- Form fields dynamically populated -->
                    <div class="dialog-actions">
                        <button type="button" data-close class="app-button app-button--secondary">Cancel</button>
                        <button type="submit" id="save-session-button" class="app-button app-button--primary">Save Session</button>
                    </div>
                </form>
            </dialog>

            <!-- Goal Dialog (Modal) -->
            <!-- ... existing code ... -->
        </main>

        <!-- Mobile Navigation -->
        <nav class="mobile-nav">
            <button class="nav-item active" data-page="timer">
                <i data-lucide="timer"></i>
                <span>Timer</span>
            </button>
            <button class="nav-item" data-page="sessions">
                <i data-lucide="clock"></i>
                <span>Sessions</span>
            </button>
            <button class="nav-item" data-page="goals">
                <i data-lucide="target"></i>
                <span>Goals</span>
            </button>
            <button class="nav-item" data-page="stats">
                <i data-lucide="bar-chart"></i>
                <span>Stats</span>
            </button>
            <button class="nav-item" data-page="media">
                <i data-lucide="image"></i>
                <span>Media</span>
            </button>
            <button class="nav-item" data-page="resources">
                <i data-lucide="help-circle"></i>
                <span>Resources</span>
            </button>
        </nav>
    </div>

    <!-- Add Default Categories Dialog -->
    <!-- Dialog has been removed in the simplified approach -->

    <!-- Back to Top Button -->
    <button id="back-to-top-btn" class="app-button app-button--primary" style="position: fixed; bottom: 20px; right: 20px; border-radius: 50%; width: 44px; height: 44px; padding: 0; display: flex; align-items: center; justify-content: center;" title="Back to Top">
        <i data-lucide="arrow-up"></i>
    </button>
    
    <!-- Simple modal templates (hidden by default) -->
    <div id="userGuideModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); z-index: 9999; overflow-y: auto;">
        <div style="background-color: white; margin: 50px auto; padding: 20px; width: 80%; max-width: 800px; border-radius: 8px; position: relative; max-height: 80vh; overflow-y: auto;">
            <button onclick="document.getElementById('userGuideModal').style.display='none'" style="position: absolute; top: 10px; right: 10px; background: none; border: none; font-size: 24px; cursor: pointer;">&times;</button>
            <h2>PracticeTrack User Guide</h2>
            
            <div class="filter-container">
                <div class="filter-buttons guide-filter-buttons" style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px;">
                    <button onclick="showGuideSection('all')" style="padding: 8px 16px; background: #4f46e5; color: white; border: none; border-radius: 20px; cursor: pointer;">Overview</button>
                    <button onclick="showGuideSection('timer')" style="padding: 8px 16px; background: #e5e7eb; color: #374151; border: none; border-radius: 20px; cursor: pointer;">Timer & Metronome</button>
                    <button onclick="showGuideSection('sessions')" style="padding: 8px 16px; background: #e5e7eb; color: #374151; border: none; border-radius: 20px; cursor: pointer;">Sessions</button>
                    <button onclick="showGuideSection('goals')" style="padding: 8px 16px; background: #e5e7eb; color: #374151; border: none; border-radius: 20px; cursor: pointer;">Goals</button>
                    <button onclick="showGuideSection('media')" style="padding: 8px 16px; background: #e5e7eb; color: #374151; border: none; border-radius: 20px; cursor: pointer;">Media</button>
                    <button onclick="showGuideSection('resources')" style="padding: 8px 16px; background: #e5e7eb; color: #374151; border: none; border-radius: 20px; cursor: pointer;">Resources</button>
                    <button onclick="showGuideSection('settings')" style="padding: 8px 16px; background: #e5e7eb; color: #374151; border: none; border-radius: 20px; cursor: pointer;">Settings</button>
                </div>
            </div>
            
            <div id="guideContent">
                <!-- Overview Section -->
                <div id="section-all" class="guide-section" style="display: block;">
                    <p><strong>PracticeTrack uses your browser's local storage to save your practice data directly on your device.</strong> This provides privacy and allows the app to work offline. For the best experience, it is recommended to add PracticeTrack to your mobile phone's home screen and use it consistently on the same device.</p>
                    
                    <div class="tip" style="background-color: #f0f9ff; border-left: 4px solid #3b82f6; padding: 15px; margin: 15px 0; border-radius: 4px;">
                        <h3>Add to Home Screen</h3>
                        <p><strong>On iPhone (Safari):</strong></p>
                        <ol>
                            <li>Open PracticeTrack in Safari</li>
                            <li>Tap the share icon (square with an arrow) at the bottom of the screen</li>
                            <li>Scroll down and tap "Add to Home Screen"</li>
                            <li>Name the shortcut "PracticeTrack" and tap "Add"</li>
                        </ol>
                        <p><strong>On Android (Chrome):</strong></p>
                        <ol>
                            <li>Open PracticeTrack in Chrome</li>
                            <li>Tap the three dots (â‹®) menu in the top-right</li>
                            <li>Tap "Add to Home screen"</li>
                            <li>Confirm by tapping "Add"</li>
                        </ol>
                    </div>
                    
                    <div class="note" style="background-color: #fffbeb; border-left: 4px solid #fbbf24; padding: 15px; margin: 15px 0; border-radius: 4px;">
                        <h3>Using on Multiple Devices</h3>
                        <p>If you want to use PracticeTrack on more than one device, you'll need to <strong>manually transfer your data</strong>:</p>
                        <ol>
                            <li>On your primary device, go to Settings and use the "Export Data" button to save your data file</li>
                            <li>Transfer this file to your secondary device (via email, cloud storage, etc.)</li>
                            <li>On your secondary device, go to Settings and use the "Import Data" button to load the file</li>
                        </ol>
                    </div>

                    <h3>Getting Started</h3>
                    <ol>
                        <li>Set up your initial practice categories in the Settings tab</li>
                        <li>Configure your lesson day and time for the countdown (optional)</li>
                        <li>Explore predefined practice categories in the Resources tab and copy useful ones to your list</li>
                        <li>Set practice goals in the Goals tab (optional)</li>
                        <li>Track your practice using the Timer and Metronome</li>
                        <li>Review your practice history and progress in the Sessions and Stats tabs</li>
                        <li>Add photos, videos, or notes about your practice in the Media tab</li>
                    </ol>
                </div>
                
                <!-- Timer Section -->
                <div id="section-timer" class="guide-section" style="display: none;">
                    <h3>Using the Timer</h3>
                    <p>The timer is your main practice tool. Here's how to use it:</p>
                    <ol>
                        <li>Select a practice category from the dropdown menu (optional)</li>
                        <li>Click "Start" to begin your practice session</li>
                        <li>The timer will begin counting up, tracking your practice time</li>
                        <li>Use "Pause" to temporarily stop the timer</li>
                        <li>Click "Reset" to clear the timer and start over</li>
                        <li>Add notes about your practice session in the text area</li>
                        <li>When finished, click "Save Session" to record your practice time</li>
                    </ol>

                    <h3>Using the Metronome</h3>
                    <p>A metronome is built into the Timer page to help you keep time:</p>
                    <ol>
                        <li>Adjust the Beats Per Minute (BPM) using the slider or +/- buttons</li>
                        <li>Select a common or complex time signature using the buttons</li>
                        <li>Choose a metronome sound (Click, Wood, Digital, Soft)</li>
                        <li>Click the "Start" button below the BPM control to start/stop the metronome</li>
                        <li>Visual beat indicators show the current beat and accent</li>
                    </ol>

                    <div class="note" style="background-color: #fffbeb; border-left: 4px solid #fbbf24; padding: 15px; margin: 15px 0; border-radius: 4px;">
                        <h3>Note</h3>
                        <p>Your practice session is automatically saved when you click "Save Session." Don't forget to add notes about what you practiced before saving! The metronome runs independently of the main practice timer.</p>
                    </div>
                </div>
                
                <!-- Sessions Section -->
                <div id="section-sessions" class="guide-section" style="display: none;">
                    <h3>Tracking Your Sessions</h3>
                    <p>The Sessions tab allows you to view and manage your practice history:</p>
                    
                    <div class="feature-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                        <div class="feature-card" style="background: #f9fafb; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h4>View History</h4>
                            <p>Access your past practice sessions. By default, it shows sessions from "This Week".</p>
                        </div>
                        <div class="feature-card" style="background: #f9fafb; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h4>Filter & Search</h4>
                            <p>Filter sessions by category or date range (using presets or custom dates), and search notes.</p>
                        </div>
                        <div class="feature-card" style="background: #f9fafb; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h4>Edit & Delete</h4>
                            <p>Correct mistakes by editing session details (category, notes) or remove sessions entirely.</p>
                        </div>
                        <div class="feature-card" style="background: #f9fafb; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h4>Manual Entry</h4>
                            <p>Use the "Add Session" button to log practice you didn't track with the timer.</p>
                        </div>
                    </div>
                    
                    <div class="tip" style="background-color: #f0f9ff; border-left: 4px solid #3b82f6; padding: 15px; margin: 15px 0; border-radius: 4px;">
                        <h3>Pro Tip</h3>
                        <p>Regularly review your session notes to reinforce learning and track progress over time.</p>
                    </div>
                </div>
                
                <!-- Goals Section -->
                <div id="section-goals" class="guide-section" style="display: none;">
                    <h3>Setting Goals</h3>
                    <p>The Goals tab helps you stay motivated by setting and tracking practice goals:</p>
                    
                    <div class="feature-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                        <div class="feature-card" style="background: #f9fafb; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h4>Create Goals</h4>
                            <p>Set specific, measurable practice goals (e.g., "Master C Major scale at 120 bpm").</p>
                        </div>
                        <div class="feature-card" style="background: #f9fafb; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h4>Target Dates</h4>
                            <p>Assign optional target dates to keep yourself accountable.</p>
                        </div>
                        <div class="feature-card" style="background: #f9fafb; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h4>Categorize</h4>
                            <p>Link goals to your practice categories for better organization.</p>
                        </div>
                        <div class="feature-card" style="background: #f9fafb; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h4>Track Progress</h4>
                            <p>Mark goals as completed as you achieve them.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Media Section -->
                <div id="section-media" class="guide-section" style="display: none;">
                    <h3>Tracking Media</h3>
                    <p>The Media tab allows you to document your progress visually and with notes:</p>
                    
                    <div class="feature-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                        <div class="feature-card" style="background: #f9fafb; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h4>Photos</h4>
                            <p>Capture photos (e.g., hand position, sheet music setup) using your device camera.</p>
                        </div>
                        <div class="feature-card" style="background: #f9fafb; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h4>Videos</h4>
                            <p>Record videos of your playing to review form and sound later.</p>
                        </div>
                        <div class="feature-card" style="background: #f9fafb; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h4>Notes</h4>
                            <p>Create standalone text notes for quick thoughts, feedback, or ideas.</p>
                        </div>
                        <div class="feature-card" style="background: #f9fafb; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h4>Organization</h4>
                            <p>Filter media by type or date range. Give items names and descriptions.</p>
                        </div>
                    </div>
                    
                    <div class="note" style="background-color: #fffbeb; border-left: 4px solid #fbbf24; padding: 15px; margin: 15px 0; border-radius: 4px;">
                        <h3>Note</h3>
                        <p>Photos and videos are saved directly to your device's gallery or files. PracticeTrack only stores a reference, description, and timestamp.</p>
                    </div>
                </div>
                
                <!-- Resources Section -->
                <div id="section-resources" class="guide-section" style="display: none;">
                    <h3>Practice Resources</h3>
                    <p>The Resources tab provides a library of predefined practice categories:</p>
                    
                    <div class="feature-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                        <div class="feature-card" style="background: #f9fafb; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h4>Browse Categories</h4>
                            <p>Explore structured categories organized by instrument family (Woodwinds, Brass, Guitar, etc.).</p>
                        </div>
                        <div class="feature-card" style="background: #f9fafb; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h4>Filter & Search</h4>
                            <p>Find relevant practice material by instrument type or keyword search.</p>
                        </div>
                        <div class="feature-card" style="background: #f9fafb; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h4>Add to Your List</h4>
                            <p>Easily add categories to your personal practice list with one click.</p>
                        </div>
                        <div class="feature-card" style="background: #f9fafb; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h4>Learning Resources</h4>
                            <p>Access curated links and resources for learning various instruments and techniques.</p>
                        </div>
                    </div>
                    
                    <div class="tip" style="background-color: #f0f9ff; border-left: 4px solid #3b82f6; padding: 15px; margin: 15px 0; border-radius: 4px;">
                        <h3>Tip</h3>
                        <p>Use the "How to Practice" guide for effective practice strategies that apply to any instrument.</p>
                    </div>
                </div>
                
                <!-- Settings Section -->
                <div id="section-settings" class="guide-section" style="display: none;">
                    <h3>Configuring Settings</h3>
                    <p>The Settings page lets you customize PracticeTrack to suit your needs:</p>
                    
                    <div class="feature-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                        <div class="feature-card" style="background: #f9fafb; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h4>Lesson Settings</h4>
                            <p>Set your regular lesson day and time to enable the lesson countdown feature.</p>
                        </div>
                        <div class="feature-card" style="background: #f9fafb; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h4>Practice Categories</h4>
                            <p>Create, edit, and manage your personal list of practice categories.</p>
                        </div>
                        <div class="feature-card" style="background: #f9fafb; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <h4>Data Management</h4>
                            <p>Export your data for backup or transfer, or import data from another device.</p>
                        </div>
                    </div>
                    
                    <div class="warning" style="background-color: #fef2f2; border-left: 4px solid #ef4444; padding: 15px; margin: 15px 0; border-radius: 4px;">
                        <h3>Warning</h3>
                        <p>The "Clear All Data" option will permanently erase all your practice data. Always export your data before using this option if you want to keep a backup.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="howToPracticeModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); z-index: 9999; overflow-y: auto;">
        <div style="background-color: white; margin: 50px auto; padding: 20px; width: 80%; max-width: 800px; border-radius: 8px; position: relative; max-height: 80vh; overflow-y: auto;">
            <button onclick="document.getElementById('howToPracticeModal').style.display='none'" style="position: absolute; top: 10px; right: 10px; background: none; border: none; font-size: 24px; cursor: pointer;">&times;</button>
            <h2>How to Practice Effectively</h2>
            
            <div style="background-color: #f3f4f6; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                <p style="font-style: italic; margin: 0;"><strong>Remember:</strong> Quality of focused practice is more important than quantity. It's better to practice with concentration for 20 minutes than to practice mindlessly for 2 hours.</p>
            </div>
            
            <h3>General Practice Principles</h3>
            <ul>
                <li>
                    <strong>Have clear objectives:</strong> 
                    Know what you want to improve in each session, even if it's broad (e.g., smoother transitions, better tone, learn section A). This focuses your effort.
                </li>
                <li>
                    <strong>Warm up properly:</strong> 
                    Prepare your body and instrument. Gentle exercises, scales, or light technical work prevent injury and improve focus.
                </li>
                <li>
                    <strong>Focus on challenges & practice slowly:</strong> 
                    Isolate difficult passages. Slow down drastically, focusing on accuracy and clean execution before gradually increasing tempo. Accuracy first, speed later.
                </li>
                <li>
                    <strong>Use "Chunking":</strong> 
                    Break down complex pieces or exercises into smaller, manageable sections (chunks). Master each chunk before connecting them.
                </li>
                <li>
                    <strong>Use a metronome:</strong> 
                    Develop solid timing and rhythm. Use it consistently for scales, exercises, and challenging sections of pieces.
                </li>
                <li>
                    <strong>Record and listen/watch back:</strong> 
                    Use the Media tab to record yourself. Objective feedback helps identify issues you might not notice while playing. Reviewing past recordings over time can also clearly show your progress.
                </li>
                <li>
                    <strong>Practice consistently:</strong> 
                    Regular, focused sessions (even shorter ones) are more effective than infrequent marathon sessions. Build a routine.
                </li>
            </ul>
            
            <h3>Structuring a Session (Example Percentages)</h3>
            <p>This is just a sample structure. Adapt it to your needs:</p>
            <ol>
                <li><strong>Warm-up (~10-15%):</strong> Physical preparation, simple scales, long tones.</li>
                <li><strong>Technique (~25-30%):</strong> Focused exercises (scales, arpeggios, specific techniques) targeting areas for improvement.</li>
                <li><strong>Repertoire (~35-45%):</strong> Work on pieces. Apply technical skills, focus on musicality, use chunking for difficult parts.</li>
                <li><strong>Sight-Reading/Improvisation/Theory (~10-15%):</strong> Develop related musical skills. Choose one area per session or rotate.</li>
                <li><strong>Cool-down/Review (~5-10%):</strong> Play something enjoyable, review what you worked on, make notes for next session.</li>
            </ol>
            
            <div style="background-color: #f0f9ff; border-left: 4px solid #3b82f6; padding: 15px; margin: 15px 0; border-radius: 4px;">
                <h3>Advanced Practice Techniques</h3>
                <ul>
                    <li><strong>Interleaved practice:</strong> Instead of practicing one thing for a long time before moving to the next (blocked practice), alternate between different skills or pieces in shorter segments. This improves retention and practical application.</li>
                    <li><strong>Mental practice:</strong> Study music away from your instrument. Analyze structure, harmony, and phrasing. Visualize playing, including finger movements, breathing, and sound.</li>
                    <li><strong>Deliberate practice:</strong> Focus intensely on specific aspects that need improvement rather than mindlessly repeating. Constantly evaluate what's working and what needs adjustment.</li>
                    <li><strong>Practice performance:</strong> Regularly play through pieces without stopping, as if performing. Record these run-throughs to identify areas that need attention.</li>
                    <li><strong>Spaced repetition:</strong> Rather than cramming all practice of a piece into one session, spread it out over multiple days with increasing intervals between practice sessions. This enhances long-term memory.</li>
                </ul>
            </div>
            
            <div style="background-color: #fef2f2; border-left: 4px solid #ef4444; padding: 15px; margin: 15px 0; border-radius: 4px;">
                <h3>Common Practice Mistakes to Avoid</h3>
                <ul>
                    <li><strong>Always starting from the beginning:</strong> This leads to the beginning being well-practiced but later sections neglected. Start from different points in the piece.</li>
                    <li><strong>Playing too fast:</strong> Rushing to play at tempo before mastering the notes and rhythms leads to reinforcing mistakes. Slow practice builds a strong foundation.</li>
                    <li><strong>Not using a metronome:</strong> Playing without rhythmic discipline can lead to timing issues that become habits. Use a metronome regularly.</li>
                    <li><strong>Ignoring body tension:</strong> Tension leads to technical limitations and potential injuries. Take breaks, stretch, and be aware of your posture and tension points.</li>
                    <li><strong>Mindless repetition:</strong> Simply playing through something many times without focused attention on improvement is inefficient. Always practice with clear intent.</li>
                </ul>
            </div>
            
            <h3>Practice Progress Tracking</h3>
            <p>Use PracticeTrack to track your progress effectively:</p>
            <ul>
                <li>Create specific categories for techniques, exercises, or pieces you're working on</li>
                <li>Set realistic, measurable goals with target dates</li>
                <li>Record detailed notes during practice sessions</li>
                <li>Take videos or audio recordings to monitor your progress over time</li>
                <li>Review your practice statistics to identify patterns and adjust your practice strategy</li>
            </ul>
            
            <p style="text-align: center; margin-top: 30px; font-style: italic;">Remember: Success comes from consistent, focused, and intelligent practice over time.</p>
        </div>
    </div>
    
    <div id="resourcesModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); z-index: 9999; overflow-y: auto;">
        <div style="background-color: white; margin: 50px auto; padding: 20px; width: 80%; max-width: 800px; border-radius: 8px; position: relative; max-height: 80vh; overflow-y: auto;">
            <button onclick="document.getElementById('resourcesModal').style.display='none'" style="position: absolute; top: 10px; right: 10px; background: none; border: none; font-size: 24px; cursor: pointer;">&times;</button>
            <h2>Comprehensive Music Learning Resources</h2>
            
            <h3>General Music Theory and Education</h3>
            <ul>
                <li><a href="https://www.musictheory.net/" target="_blank">Musictheory.net</a> - Interactive lessons and exercises</li>
                <li><a href="https://www.teoria.com/" target="_blank">Teoria.com</a> - Music theory tutorials and exercises</li>
                <li><a href="https://www.daveconservatoire.org/" target="_blank">Dave Conservatoire</a> - Free online music school</li>
                <li><a href="https://www.musictheoryacademy.com/free-resources/" target="_blank">Music Theory Academy</a> - Free theory lessons and worksheets</li>
                <li><a href="https://imslp.org/" target="_blank">IMSLP/Petrucci Music Library</a> - Public domain sheet music archive</li>
            </ul>
            
            <h3>Instrument-Specific Resources</h3>
            
            <h4>Piano/Keyboard</h4>
            <ul>
                <li><a href="https://www.pianote.com/blog/category/free-piano-lessons/" target="_blank">Pianote Free Lessons</a> - Free piano lessons from Pianote</li>
                <li><a href="https://www.pianogroove.com/free-lessons/" target="_blank">Pianogroove</a> - Jazz, blues and pop piano tutorials</li>
            </ul>
            
            <h4>Guitar</h4>
            <ul>
                <li><a href="https://www.justinguitar.com/" target="_blank">Justin Guitar</a> - Comprehensive free guitar lessons</li>
                <li><a href="https://www.guitarcompass.com/free-lessons/" target="_blank">Guitar Compass</a> - Free video lessons</li>
                <li><a href="https://www.andyguitar.co.uk/online-lessons/" target="_blank">Andy Guitar</a> - Free online guitar lessons</li>
            </ul>
            
            <h4>Drums</h4>
            <ul>
                <li><a href="https://www.drumeo.com/free/" target="_blank">Drumeo Free Lessons</a> - Free drum lessons</li>
                <li><a href="https://www.freedrumlessons.com/" target="_blank">Free Drum Lessons Online</a> - Video lessons for beginners to advanced</li>
            </ul>
            
            <h4>Strings (Violin, Viola, Cello, Bass)</h4>
            <ul>
                <li><a href="https://www.violinlab.com/free-violin-lessons/" target="_blank">Violin Lab Free Lessons</a> - Free violin lessons</li>
                <li><a href="https://celloheaven.com/free-cello-lessons/" target="_blank">Cello Heaven</a> - Free cello lessons and resources</li>
            </ul>
            
            <h4>Woodwinds</h4>
            <ul>
                <li><a href="https://theflutecoach.com/blog/" target="_blank">The Flute Coach</a> - Free flute resources and tutorials</li>
                <li><a href="https://www.clarinetinstitute.com/free-music" target="_blank">Clarinet Institute Digital Library</a> - Free sheet music and resources</li>
            </ul>
            
            <h4>Brass</h4>
            <ul>
                <li><a href="https://www.trumpetexcerpts.org/" target="_blank">Trumpet Excerpts</a> - Orchestral trumpet excerpts with commentary</li>
                <li><a href="https://www.tromboneexcerpts.org/" target="_blank">Trombone Excerpts</a> - Orchestral trombone excerpts with commentary</li>
            </ul>
            
            <h3>Practice and Performance Techniques</h3>
            <ul>
                <li><a href="https://bulletproofmusician.com/blog/" target="_blank">Bulletproof Musician</a> - Performance psychology blog</li>
                <li><a href="https://www.musicpracticetips.com/" target="_blank">Music Practice Tips</a> - Effective practice strategies</li>
            </ul>
            
            <h3>Sheet Music Libraries</h3>
            <ul>
                <li><a href="https://musopen.org/" target="_blank">Musopen</a> - Free public domain music</li>
                <li><a href="https://www.free-scores.com/" target="_blank">Free-scores.com</a> - Free sheet music downloads</li>
                <li><a href="https://www.mutopiaproject.org/" target="_blank">Mutopia Project</a> - Free sheet music based on editions in the public domain</li>
            </ul>
            
            <h3>Sight-Reading and Ear Training</h3>
            <ul>
                <li><a href="https://www.sightreadingfactory.com/freeresources" target="_blank">Sight Reading Factory</a> - Selected free sight-reading exercises</li>
                <li><a href="https://www.good-ear.com/" target="_blank">Good-Ear.com</a> - Free ear training exercises</li>
                <li><a href="https://www.teoria.com/en/exercises/" target="_blank">Teoria Ear Training</a> - Interactive ear training exercises</li>
            </ul>
        </div>
    </div>
    
    <!-- Direct inline script to handle the buttons simply -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Resources page buttons
        const resourcesHowToUseBtn = document.getElementById('resources-how-to-use-btn');
        const howToPracticeBtn = document.getElementById('how-to-practice-btn');
        const exploreResourcesBtn = document.getElementById('explore-resources-btn');
        
        // Function to add button press effect
        function addButtonPressEffect(button) {
            button.addEventListener('click', function() {
                // Add pressed class
                this.classList.add('button-pressed');
                
                // Remove the class after a short delay
                setTimeout(() => {
                    this.classList.remove('button-pressed');
                }, 200);
            });
        }
        
        // Add press effect to all app buttons
        const allAppButtons = document.querySelectorAll('.app-button');
        allAppButtons.forEach(button => {
            addButtonPressEffect(button);
        });
        
        // Add press effect to resource instrument filter buttons
        const resourceFilterButtons = document.querySelectorAll('.resource-instrument-filter-btn');
        resourceFilterButtons.forEach(button => {
            addButtonPressEffect(button);
        });
        
        // Add press effect to guide filter buttons
        const guideFilterButtons = document.querySelectorAll('.guide-filter-buttons button');
        guideFilterButtons.forEach(button => {
            addButtonPressEffect(button);
        });
        
        // Add press effect to modal close buttons
        const closeButtons = document.querySelectorAll('button[onclick*="Modal"]');
        closeButtons.forEach(button => {
            addButtonPressEffect(button);
        });
        
        // Add press effect to all buttons in modals
        setTimeout(() => {
            // Wait for DOM to be fully loaded with modals
            const allModalButtons = document.querySelectorAll('#userGuideModal button, #howToPracticeModal button, #resourcesModal button');
            allModalButtons.forEach(button => {
                if (!button.hasAttribute('onclick')) { // Skip close buttons we already handled
                    addButtonPressEffect(button);
                }
            });
        }, 500);
        
        // Use event delegation for dynamically created buttons in the resources tab
        const resourcesList = document.getElementById('dynamic-resource-list');
        if (resourcesList) {
            resourcesList.addEventListener('click', function(event) {
                // Check if the clicked element is a button
                const button = event.target.closest('button');
                if (button && button.classList.contains('add-topic-btn')) {
                    // Add the button press effect
                    button.classList.add('button-pressed');
                    
                    // Remove the class after a short delay
                    setTimeout(() => {
                        button.classList.remove('button-pressed');
                    }, 200);
                }
            });
        }
        
        // Add CSS for the "add" buttons in resources
        const addButtonStyle = document.createElement('style');
        addButtonStyle.textContent = `
            .add-topic-btn.button-pressed {
                transform: scale(0.95);
                opacity: 0.8;
                background-color: rgba(79, 70, 229, 0.8) !important;
                transition: all 0.1s ease-in-out;
            }
        `;
        document.head.appendChild(addButtonStyle);
        
        // Simple event handlers that directly manipulate the DOM
        if (resourcesHowToUseBtn) {
            resourcesHowToUseBtn.onclick = function() {
                document.getElementById('userGuideModal').style.display = 'block';
                showGuideSection('all'); // Show overview section by default
                console.log("User Guide button clicked");
            };
        }
        
        if (howToPracticeBtn) {
            howToPracticeBtn.onclick = function() {
                document.getElementById('howToPracticeModal').style.display = 'block';
                console.log("How to Practice button clicked");
            };
        }
        
        if (exploreResourcesBtn) {
            exploreResourcesBtn.onclick = function() {
                document.getElementById('resourcesModal').style.display = 'block';
                console.log("Learning Resources button clicked");
            };
        }
        
        // Close modals when clicking outside content
        window.onclick = function(event) {
            const modals = [
                document.getElementById('userGuideModal'),
                document.getElementById('howToPracticeModal'),
                document.getElementById('resourcesModal')
            ];
            
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        };
        
        // Close modals with ESC key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                document.getElementById('userGuideModal').style.display = 'none';
                document.getElementById('howToPracticeModal').style.display = 'none';
                document.getElementById('resourcesModal').style.display = 'none';
            }
        });
    });
    
    // Function to show different sections in the user guide
    function showGuideSection(sectionId) {
        // Hide all sections
        const sections = document.querySelectorAll('.guide-section');
        sections.forEach(section => {
            section.style.display = 'none';
        });
        
        // Show the selected section
        document.getElementById('section-' + sectionId).style.display = 'block';
        
        // Update button styles
        const buttons = document.querySelectorAll('.guide-filter-buttons button');
        buttons.forEach(button => {
            // Reset all buttons to default style
            button.style.background = '#e5e7eb';
            button.style.color = '#374151';
        });
        
        // Set active button style
        const activeButton = document.querySelector(`.guide-filter-buttons button[onclick="showGuideSection('${sectionId}')"]`);
        if (activeButton) {
            activeButton.style.background = '#4f46e5';
            activeButton.style.color = 'white';
        }
    }
    </script>
</body>
</html> 